# NeoBridge API Gateway - Kong Configuration
# Environment-specific configuration for Kong Enterprise

# Kong configuration file
# This file contains Kong-specific configuration

# Database configuration
database = postgres
pg_host = postgres
pg_port = 5432
pg_user = kong
pg_password = kong_password
pg_database = kong

# Kong configuration
proxy_access_log = /dev/stdout
proxy_error_log = /dev/stderr
admin_access_log = /dev/stdout
admin_error_log = /dev/stderr

# Admin API configuration
admin_listen = 0.0.0.0:8001
admin_gui_url = http://localhost:8002

# Proxy configuration
proxy_listen = 0.0.0.0:8000, 0.0.0.0:8443 ssl
ssl_cert = /etc/ssl/certs/kong.crt
ssl_cert_key = /etc/ssl/private/kong.key

# SSL configuration
ssl_cipher_suite = intermediate
ssl_protocols = TLSv1.2 TLSv1.3

# Load balancing
upstream_keepalive = 32
upstream_keepalive_timeout = 60s

# Rate limiting
rate_limiting = true
rate_limiting_policy = local

# CORS configuration
cors_origins = *
cors_methods = GET,POST,PUT,DELETE,OPTIONS
cors_headers = Content-Type,Authorization,X-Requested-With
cors_exposed_headers = X-Total-Count
cors_credentials = true
cors_max_age = 3600

# JWT configuration
jwt_secret = neobridge-jwt-secret-key-change-in-production
jwt_expiration = 86400000
jwt_refresh_expiration = 604800000

# Monitoring configuration
prometheus_metrics = true
prometheus_status_codes = true
prometheus_latency = true
prometheus_bandwidth = true
prometheus_upstream_health = true

# Security configuration
trusted_ips = 0.0.0.0/0
real_ip_header = X-Real-IP
real_ip_recursive = off

# Logging configuration
log_level = info
log_format = json

# Performance configuration
nginx_worker_processes = auto
nginx_worker_connections = auto
nginx_worker_rlimit_nofile = auto
